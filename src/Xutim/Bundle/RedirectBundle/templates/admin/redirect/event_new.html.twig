{% extends '@XutimCore/admin/settings/settings_layout.html.twig' %}

{% block title %}
    {{ 'redirects'|trans({}, 'admin')|capitalize }}
{% endblock %}

{% block pageMenu %}
    <twig:Xutim:Admin:PublicPageLink />
    <twig:Xutim:Admin:Button
        tag="a"
        variant="nav"
        data-turbo-frame="modal"
        href="{{ path('admin_redirect_new') }}"
    >
        <twig:ux:icon name="tabler:directions" class="w-4" />
        {{ 'add a new redirect'|trans({}, 'admin')|capitalize }}
    </twig:Xutim:Admin:Button>
{% endblock %}

{% block breadcrumbHeader %}
    <twig:Xutim:Admin:Breadcrumbs>
        <li class="breadcrumb-item">
            <a href="{{ path('admin_settings_site') }}">
                {{ 'settings'|trans({}, 'admin')|capitalize }}
            </a>
        </li>
        <li class="breadcrumb-item">
            {{ 'redirects'|trans({}, 'admin')|capitalize }}
        </li>
    </twig:Xutim:Admin:Breadcrumbs>
{% endblock %}

{% block settingsBody %}
    <div class="row">
        <div class="col-md-12">
            <h2 class="mb-2 py-2">
                {{ 'countries'|trans({}, 'admin')|capitalize }}
            </h2>
            {%
                component 'Xutim:Admin:DataTable' with {
                        frameId: 'country-list',
                        pager: countries,
                        filter: filter,
                        tableBodyId: 'country-list-body',
                    }
            %}
            {% block header %}
                {% import '@XutimCore/admin/common/icons.html.twig' as icons %}
                <th>
                    {{ 'name'|trans({}, 'admin')|capitalize }}
                </th>
                <th>
                    <a
                        href="{{ path(app.current_route, {...app.request.query.all(), orderColumn: 'code', orderDirection: filter.reverseDirection('code')}) }}"
                    >
                        {{ 'code'|trans({}, 'admin')|capitalize }}
                        {{
                            icons.order_arrow('code', filter.orderColumn, filter.orderDirection)
                        }}
                    </a>
                </th>
                <th>
                    {{ 'languages'|trans({}, 'admin')|capitalize }}
                </th>
            {% endblock %}

            {% block body %}
                {% for country in countries %}
                    {{ include('taize/admin/country/_country_row.html.twig') }}
                {% endfor %}
            {% endblock %}
            {% endcomponent %}
        </div>
    </div>
{% endblock %}

<div class="card">
    <div class="card-body">
        {{ form_start(form) }}
        {{ form_row(form.startsAt) }}
        {{ form_row(form.endsAt) }}
        {{ form_row(form.title) }}
        {{ form_row(form.location) }}
        {{ form_row(form.description) }}
        {{ form_row(form.locale) }}
        {{ form_row(form.article) }}
        {{ form_row(form.page) }}
        {{ form_row(form.submit) }}
        {{ form_row(form._token) }}
        {{ form_end(form, {render_rest: false}) }}
    </div>
</div>
{% endblock %}
